// index.html ã® syncTickets é–¢æ•°å†…ã® check å‡¦ç†ã‚’ä»¥ä¸‹ã«å·®ã—æ›¿ãˆã¦ãã ã•ã„ ğŸš€
        async function syncTickets(retry = false) {
            let attempts = 0;
            const check = async () => {
                const res = await fetch(`/api/user_info?userId=${userId}`);
                const data = await res.json();
                document.getElementById('nav-ticket').innerText = data.ticket_balance || 0;
                
                // äºˆç´„ãŒã‚ã‚‹å ´åˆã€å ã„å¸«IDã‚’ã‚»ãƒƒãƒˆã—ã¦ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º ğŸ”®
                if (data.hasPendingReservation) {
                    currentCastId = data.pendingCastId;
                    document.getElementById('reservation-status').style.display = 'block';
                } else {
                    document.getElementById('reservation-status').style.display = 'none';
                }
                
                if (retry && (data.ticket_balance || 0) === 0 && attempts < 5) { attempts++; setTimeout(check, 3000); }
            };
            await check();
        }
