// window.onload éƒ¨åˆ†ã®ä¿®æ­£æŠœç²‹
window.onload = async () => { 
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('payment') === 'success') alert("ãƒã‚±ãƒƒãƒˆã®è³¼å…¥ãŒå®Œäº†ã—ã¾ã—ãŸï¼");
    if (userId) {
        const res = await fetch('/api/login', { method: 'POST', body: JSON.stringify({ userId }) });
        const data = await res.json();
        // ç™»éŒ²æ¸ˆã¿ã€ã‚‚ã—ãã¯æ”¯æ‰•ã„ç›´å¾Œãªã‚‰å ã„å¸«é¸æŠç”»é¢ã¸ ğŸš€
        if (data.isComplete || urlParams.get('payment') === 'success') initApp(); 
        else showScreen('setup-screen');
    } else { showScreen('gateway-screen'); }
};
